<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulador de Reajustes do Contracheque 2025/2026</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { margin: 0; font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: #f6f7fb; color: #0f172a; line-height: 1.6; }

    /* Cabeçalho / navegação (compatível com header.html) */
    header { background: #003366; color: #fff; }
    nav { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; padding: 16px; }
    .logo img { height: 44px; }
    nav ul { list-style: none; display: flex; gap: 16px; padding: 0; margin: 0; }
    nav ul li { position: relative; }
    nav ul li a { color: #fff; text-decoration: none; font-weight: 600; padding: 8px 12px; display: block; border-radius: 6px; }
    nav ul li a:hover { background: #005599; }
    nav ul li ul { display: none; position: absolute; left: 0; top: 100%; min-width: 220px; background: #004080; box-shadow: 0 6px 18px rgba(0,0,0,.25); z-index: 10; }
    nav ul li:hover > ul { display: block; animation: fadeIn .25s ease; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }

    /* Layout principal */
    .section { padding: clamp(16px, 5vw, 48px) 16px; }
    .main-card { max-width: min(1000px, 96vw); margin: 0 auto; background: #fff; border-radius: 14px; box-shadow: 0 10px 30px rgba(2,6,23,.08); overflow: hidden; }

    /* Iframe responsivo (auto-altura) */
    .iframe-wrap { position: relative; }
    #wizardFrame { width: 100%; border: 0; display: block; height: 70dvh; }
    #wizardFrame { overflow: hidden; } /* Evita barra dupla de rolagem no iOS/Android */

    /* CTA azul */
    .cta { background: #003366; color: #fff; text-align: center; padding: clamp(24px, 6vw, 56px) 16px; }
    .cta h2 { font-size: clamp(20px, 5vw, 28px); margin: 0 0 8px; }
    .cta p { max-width: 720px; margin: 12px auto 0; font-size: clamp(14px, 3.5vw, 16px); opacity: .95; }
    .cta a { display: inline-block; margin-top: 18px; padding: 12px 20px; background: #f5b200; color: #000; text-decoration: none; border-radius: 10px; font-weight: 700; }

    /* Quem somos */
    .about { text-align: center; background: #fff; }
    .about h2 { font-size: clamp(20px, 5vw, 26px); margin: 0 0 8px; }
    .about p { max-width: 840px; margin: 8px auto 0; font-size: clamp(14px, 3.5vw, 16px); color: #334155; }
    .about a { display: inline-block; margin-top: 16px; padding: 10px 16px; background: #003366; color: #fff; text-decoration: none; border-radius: 10px; }

    /* Footer (compatível com footer.html) */
    footer { background: #002244; color: #fff; padding: 32px 16px; }
    .footer-grid { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 24px; text-align: center; }
    .footer-bottom { text-align: center; margin-top: 18px; font-size: 13px; opacity: .9; }
    .social-icons a { color: #fff; margin: 0 8px; font-size: 20px; text-decoration: none; }

    /* WhatsApp flutuante */
    .whatsapp-float { position: fixed; right: 16px; bottom: 16px; z-index: 1000; }
    .whatsapp-float img { width: 58px; height: 58px; transition: transform .2s ease; }
    .whatsapp-float img:hover { transform: scale(1.06); }

    /* Mobile refinements */
    @media (max-width: 768px) {
      nav { flex-direction: column; gap: 8px; }
      nav ul { flex-direction: column; align-items: stretch; gap: 8px; width: 100%; }
      .main-card { border-radius: 12px; }
      #wizardFrame { height: 78svh; }
    }

    @media (max-width: 480px) {
      .whatsapp-float { bottom: 12px; right: 12px; }
      .whatsapp-float img { width: 54px; height: 54px; }
    }

    /* Acessibilidade / redução de movimento */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <!-- HEADER externo -->
  <div id="site-header"></div>

  <section class="section">
    <div class="main-card">
      <div class="iframe-wrap">
        <iframe
          id="wizardFrame"
          src="./index_contracheque_wizard.html"
          title="Simulador de Reajustes do Contracheque 2025/2026"
          loading="eager"
          referrerpolicy="no-referrer-when-downgrade"
          aria-label="Simulador de reajustes">
        </iframe>
      </div>
    </div>
  </section>

  <section class="cta">
    <h2>Associe-se à APIPMCBDF</h2>
    <p>Junte-se a centenas de associados que têm seus direitos defendidos com firmeza e comprometimento. Seja representado, tenha acesso a benefícios exclusivos e faça parte da nossa história!</p>
    <a href="/seja-socio.html">Quero me associar</a>
  </section>

  <section class="section about">
    <h2>Quem Somos</h2>
    <p>A APIPMCBDF representa e apoia os pensionistas e inativos da Polícia Militar e Corpo de Bombeiros do Antigo e Atual Distrito Federal. Lutamos por direitos, assistência e valorização dos nossos associados.</p>
    <a href="/sobre.html">Saiba mais</a>
  </section>

  <!-- FOOTER externo -->
  <div id="site-footer"></div>

  <!-- WhatsApp -->
  <div class="whatsapp-float">
    <a href="https://wa.me/5521984997413" target="_blank" rel="noopener">
      <img alt="WhatsApp" src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" />
    </a>
  </div>

  <script>
    // ===== Slideshow (mantido — caso header/footer tragam .slideshow-img) =====
    const slides = document.querySelectorAll('.slideshow-img');
    let slideIndex = 0;
    if (slides.length) {
      setInterval(() => {
        slides[slideIndex].classList.remove('active');
        slideIndex = (slideIndex + 1) % slides.length;
        slides[slideIndex].classList.add('active');
      }, 5000);
    }

    // ===== Menu (compatível com header) =====
    function toggleMenu(){ const m = document.getElementById('menu'); if (m) m.classList.toggle('active'); }

    // ===== Reescrita de URLs relativas (fragmentos) =====
    function rewriteRelativeUrls(container, attrs=['href','src','action']){
      const isAbs = (u) => /^(?:[a-z]+:)?\/\//i.test(u);
      const isSpecial = (u) => u.startsWith('#') || u.startsWith('mailto:') || u.startsWith('tel:');
      const toAbs = (u) => '/' + u.replace(/^\.\//,'').replace(/^\//,'');
      attrs.forEach(attr => {
        container.querySelectorAll('['+attr+']').forEach(el => {
          const v = el.getAttribute(attr); if (!v) return;
          if (isAbs(v) || isSpecial(v) || v.startsWith('/')) return;
          el.setAttribute(attr, toAbs(v));
        });
      });
    }

    async function loadFragment(targetSelector, paths){
      const target = document.querySelector(targetSelector); if (!target) return false;
      for (const p of paths){
        try {
          const res = await fetch(p, { cache: 'no-store' });
          if (!res.ok) continue;
          const html = await res.text();
          target.innerHTML = html; rewriteRelativeUrls(target); return true;
        } catch(e){ /* tenta próximo */ }
      }
      console.warn('Não foi possível carregar', targetSelector, 'de', paths);
      return false;
    }

    (async () => {
      await loadFragment('#site-header', ['../header.html','/header.html','/SITE/header.html']);
      await loadFragment('#site-footer', ['../footer.html','/footer.html','/SITE/footer.html']);
    })();

    // ===== Auto-altura do iframe do simulador (sem rolagem dupla no mobile) =====
    (function(){
      const frame = document.getElementById('wizardFrame');
      if (!frame) return;
      const ORIGIN = location.origin; // assumindo mesma origem do wizard

      function setHeight(h){
        const height = Number(h);
        if (!Number.isFinite(height)) return;
        if (height < 320) return; // evita collapses
        frame.style.height = height + 'px';
      }

      // Recebe altura do filho
      window.addEventListener('message', (ev) => {
        if (ev.origin !== ORIGIN) return; // segurança
        const data = ev.data || {};
        if (data.type === 'APIP-IFRAME-HEIGHT') setHeight(data.height);
      });

      // Solicita altura ao carregar e em resize
      function requestHeight(){
        try { frame.contentWindow.postMessage({ type: 'APIP-REQUEST-HEIGHT' }, ORIGIN); } catch(e){}
      }
      frame.addEventListener('load', requestHeight);
      window.addEventListener('resize', () => { requestHeight(); });
    })();
  </script>
</body>
</html>
