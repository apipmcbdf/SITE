<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Consulta de Documenta√ß√£o</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; background-color: #f9f9f9; }
    header { background-color: #003366; padding: 20px; color: white; }
    nav { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
    .logo img { height: 50px; }
    nav ul { display: flex; list-style: none; gap: 20px; flex-wrap: wrap; }
    nav ul li { position: relative; }
    nav ul li a { color: white; text-decoration: none; font-weight: 600; padding: 8px 12px; display: block; transition: background-color 0.3s ease; }
    nav ul li a:hover { background-color: #005599; border-radius: 4px; }
    nav ul li ul { display: none; position: absolute; background-color: #004080; top: 100%; left: 0; min-width: 220px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 10; }
    nav ul li:hover ul { display: block; animation: fadeIn 0.3s ease-in-out; }
    nav ul li ul li a { padding: 10px; font-weight: 400; }
    @keyframes fadeIn { from {opacity: 0; transform: translateY(-10px);} to {opacity: 1; transform: translateY(0);} }
    footer { background-color: #002244; color: white; padding: 40px 20px; }
    .footer-grid { max-width: 1200px; margin: auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; text-align: center; }
    .footer-grid div p { font-size: 14px; margin: 8px 0; }
    .footer-bottom { text-align: center; margin-top: 30px; font-size: 13px; }
    .social-icons { margin-top: 10px; }
    .social-icons a { color: white; margin: 0 8px; font-size: 20px; text-decoration: none; transition: transform 0.3s ease; }
    .social-icons a:hover { transform: scale(1.2); }
    .whatsapp-float { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
    .whatsapp-float img { width: 60px; height: 60px; transition: transform 0.3s ease; }
    .whatsapp-float img:hover { transform: scale(1.1); }
    /* Estilo da consulta */
    .consulta-container { max-width: 700px; margin: 60px auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    .consulta-container h1 { text-align: center; margin-bottom: 30px; font-weight: 600; font-size: 24px; color: #003366; }
    .consulta-container label { font-weight: 500; display: block; margin-bottom: 8px; }
    .consulta-container input[type="text"] { width: 100%; padding: 10px; font-size: 16px; text-align: center; margin-bottom: 20px; border-radius: 6px; border: 1px solid #ccc; }
    .consulta-container button { width: 100%; padding: 12px; font-size: 16px; font-weight: bold; color: white; background-color: #4a90e2; border: none; border-radius: 6px; cursor: pointer; }
    .consulta-container button:hover { background-color: #357ab8; }
    .card { border: none; border-radius: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); background-color: #ffffff; margin-top: 30px; padding: 20px; }
    .data-section { margin-bottom: 30px; }
    .data-section h3 { font-size: 18px; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 5px; margin-bottom: 15px; }
    .data-section ul { list-style: none; padding: 0; }
    .data-section li { margin-bottom: 8px; }
  </style>
</head>
<body>
<div style="background-color: #ffcc00; color: #000; padding: 10px 20px; text-align: center; font-weight: bold;">
  üì¢ Aten√ß√£o: A segunda listagem de implanta√ß√£o da VPE j√° foi protocolada. N√£o h√° prazo para implanta√ß√£o. Aguarde
</div>
<header>
<nav>
<div class="logo"><img alt="Logo APIPMCBDF" src="https://i.ibb.co/9HcbZhnR/Novo-Projeto.png"/></div>
<ul>
<li><a href="index.html">In√≠cio</a></li>
<li><a href="#">Institucional</a><ul><li><a href="sobre.html">Sobre a Associa√ß√£o</a></li><li><a href="conquistas.html">Conquistas</a></li><li><a href="diretoria.html">Diretoria</a></li><li><a href="juridico.html">Atendimento Jur√≠dico</a></li><li><a href="medicos.html">Atendimento M√©dico</a></li><li><a href="galeria.html">Galeria de Fotos</a></li></ul></li>
<li><a href="#">Informa√ß√µes</a><ul><li><a href="vpe.html">VPE</a></li><li><a href="auxilio.html">Aux√≠lio Moradia</a></li><li><a href="soldo.html">Soldo</a></li><li><a href="gfm.html">GFM e GEFM</a></li><li><a href="pensao.html">Desconto Pens√£o Militar</a></li><li><a href="art24.html">Art. 24 - EC 103/2019</a></li></ul></li>
<li><a href="consulta.html">Consultas</a></li>
<li><a href="seja-socio.html">Seja S√≥cio</a></li>
<li><a href="contato.html">Contato</a></li>
</ul>
</nav>
</header>
<section style="padding: 60px 20px; background-color: #f4f6f9;">
<div class="consulta-container">
<h1>CONSULTA DE DOCUMENTA√á√ÉO</h1>
<label for="cpfInput">Digite seu CPF:</label>
<input id="cpfInput" placeholder="Digite seu CPF (com ou sem pontua√ß√£o)" type="text"/>
<button id="consultBtn">CONSULTAR</button>
<div id="resultContainer"></div>
</div>
</section>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDoXdgj_fRuYTluJby6QOIiEYBu268lZmQ",
    authDomain: "documentos-apipmcbdf.firebaseapp.com",
    projectId: "documentos-apipmcbdf",
    storageBucket: "documentos-apipmcbdf.appspot.com",
    messagingSenderId: "422508459389",
    appId: "1:422508459389:web:bebd6b53839f77a3cd4814"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  function formatarCPF(cpf) {
    return cpf.replace(/\D/g, '').padStart(11, '0');
  }

  function criarLista(campos, data) {
    const ul = document.createElement('ul');
    for (const campo of campos) {
      const valor = data[campo];
      if (valor && valor.toString().trim() !== '') {
        const li = document.createElement('li');
// define o r√≥tulo conforme cada caso
const label = 
  (campo === 'RECEBE VPE' && valor.includes('LISTA DE IMPLANTA√á√ÉO')) ? 'LISTAGEM' :
  (campo === 'STATUS VPE'      && data['DOCUMENTA√á√ÉO VPE'] === 'INCOMPLETA')   ? 'PEND√äNCIAS VPE' :
  (campo === 'STATUS AUX'      && data['DOCUMENTA√á√ÉO AUX'] === 'INCOMPLETA')   ? 'PEND√äNCIAS AUX' :
  campo;

// insere no <li> com o novo label
li.innerHTML = `<strong>${label}:</strong> ${valor}`;


        ul.appendChild(li);
      }
    }
    return ul.childElementCount > 0 ? ul : null;
  }

  function mostrarDados(data) {
    const container = document.getElementById('resultContainer');
    container.innerHTML = '';
    const card = document.createElement('div');
    card.className = 'card';

    if (!data || Object.keys(data).length === 0) {
      card.innerHTML = "<p><strong>Nenhum dado encontrado para este CPF.</strong></p>";
      container.appendChild(card);
      return;
    }

    const grupos = [
      { titulo: null, campos: ['NOME', 'MENSALIDADE', 'BENEFICIARIO', 'AMFETA'] },
      { titulo: 'AUX√çLIO MORADIA', campos: ['DOCUMENTA√á√ÉO AUX', 'STATUS AUX', 'RECEBE AUX'] },
      { titulo: 'VPE', campos: ['DOCUMENTA√á√ÉO VPE', 'STATUS VPE', 'RECEBE VPE'] }
    ];

    grupos.forEach(grupo => {
      const lista = criarLista(grupo.campos, data);
      if (lista) {
        const section = document.createElement('div');
        section.className = 'data-section';
        if (grupo.titulo) {
          const h3 = document.createElement('h3');
          h3.textContent = grupo.titulo;
          section.appendChild(h3);
        }
        section.appendChild(lista);
        card.appendChild(section);
      }
    });

    container.appendChild(card);

    const docAux = (data['DOCUMENTA√á√ÉO AUX'] || '').toUpperCase();
    const docVpe = (data['DOCUMENTA√á√ÉO VPE'] || '').toUpperCase();
    const statusAux = (data['STATUS AUX'] || '').toUpperCase();
    const statusVpe = (data['STATUS VPE'] || '').toUpperCase();
    const recebeVpe = (data['RECEBE VPE'] || '').toUpperCase();

// ‚Äî‚Äì 1) documentos-padr√£o pendentes e seus links ‚Äî‚Äì
const docsPadrao = {
  'PROCURA√á√ÉO AUX':    'https://drive.google.com/file/d/1rsujXVdCMEiIO0di30OoUAuKwO4JEnvK/view?usp=drive_link',
  'PROCURA√á√ÉO VPE':    'https://drive.google.com/file/d/1-1IL4GtaIA0uE_OeSJuvqNtuAGiWF-4D/view?usp=drive_link',
  'CONTRATO AUX':      'https://drive.google.com/file/d/1rryE7Kworr16Qhb6-i1TGXZXQyPImiI-/view?usp=drive_link',
  'CONTRATO VPE':      'https://drive.google.com/file/d/1-0PkD2Y9azc6TxnDzl1SmPHfXlKFyj7g/view?usp=drive_link',
  'DECLARA√á√ÉO DE INEXISTENCIA DE A√á√ÉO VPE': 'https://drive.google.com/file/d/1-0Ee-gDuO4jHjOGBLFQHNR7pVcn8eKSf/view?usp=drive_link',
  'DECLARA√á√ÉO DE INEXISTENCIA DE A√á√ÉO AUX': 'https://drive.google.com/file/d/1rt4tOVPEQuU7Nj1mHEIMlx25L2ZqaXjp/view?usp=drive_link'
};

const docsEncontrados = Object.entries(docsPadrao)
  .filter(([nome]) =>
    statusAux.includes(nome) ||
    statusVpe.includes(nome)
  )
  .map(([nome, url]) => ({ nome, url }));

if (docsEncontrados.length) {
  const avisoLinks = document.createElement('div');
  avisoLinks.className = 'card';
  avisoLinks.innerHTML = `
    <div style="font-size: 16px; line-height: 1.6; color: #333;">
      <h3 style="color: #003366; margin-bottom: 10px;">üìå Baixe aqui os documentos padr√£o pendentes:</h3>
      <ul style="margin-left: 20px; margin-top: 10px;">
        ${docsEncontrados
          .map(d => `<li><a href="${d.url}" target="_blank">${d.nome}</a></li>`)
          .join('')}
      </ul>
    </div>
  `;
  container.appendChild(avisoLinks);
}

// ‚Äî‚Äì 2) aviso gen√©rico de documentos pendentes ‚Äî‚Äì
const pendente = [docAux, docVpe]
  .some(doc => !['COMPLETA', 'EM FILA', 'ARQUIVADA', 'PROTOCOLADA'].includes(doc));
if (pendente) {
  const aviso = document.createElement('div');
  aviso.className = 'card';
  aviso.innerHTML = `
  <div style="font-size: 16px; line-height: 1.6; color: #333;">
    <h3 style="color: #cc0000; margin-bottom: 15px;">üì¢ Aten√ß√£o! Envio de Documentos Pendentes</h3>

    <p>Para dar continuidade ao seu processo, encaminhe os documentos pendentes conforme as instru√ß√µes abaixo:</p>

    <h4 style="margin-top: 20px; color: #003366;">üìß Documentos que podem ser enviados por e-mail:</h4>
    <p><strong>Enviar para:</strong> documentos@apipmcbdf.com.br</p>
    <p><strong>Assunto:</strong> Documenta√ß√£o Pendente</p>

    <ul style="margin-left: 20px; margin-top: 10px;">
      <li>‚úÖ Contracheque</li>
      <li>‚úÖ Ficha Financeira (preferencialmente por e-mail)</li>
      <li>‚úÖ Comprovante de resid√™ncia</li>
      <li>‚úÖ Documento de identidade (RG ou CNH)</li>
    </ul>

    <h4 style="margin-top: 20px; color: #cc6600;">‚ö†Ô∏è Importante:</h4>
    <ul style="margin-left: 20px; margin-top: 10px;">
      <li>N√ÉO ACEITAMOS PRINTS DE TELA</li>
      <li>CUIDADO COM PDF PROTEGIDO POR SENHA</li>
      <li>Somente arquivos PDF, leg√≠veis e em boa qualidade.</li>
    </ul>

    <h4 style="margin-top: 20px; color: #003366;">üìÆ Entrega f√≠sica ou pelos Correios:</h4>
    <ul style="margin-left: 20px; margin-top: 10px;">
      <li>üîπ Contrato</li>
      <li>üîπ Procura√ß√£o</li>
      <li>üîπ Declara√ß√£o de Inexist√™ncia de A√ß√£o</li>
    </ul>

    <p style="margin-top: 15px;">Rua Evaristo da Veiga, 55, 10¬∫ andar ‚Äì CEP: 20031-040</p>
    <p>Presencial: 09h √†s 13h</p>

    <p style="margin-top: 20px;">üìû (21) 2532-6974 / 2220-6154 / 2544-2607</p>
    <p>üí¨ WhatsApp: (21) 98499-7413</p>
    <p>üìß atendimento@apipmcbdf.com.br</p>
  </div>

  `;
  container.appendChild(aviso);
}

    const temNumeroAux = /\d/.test(statusAux);
    const temNumeroVpe = /\d/.test(statusVpe);
    if (temNumeroAux || temNumeroVpe) {
      let mensagem = "Seu(s) processo(s) ";
      if (temNumeroAux && temNumeroVpe) {
        mensagem += "do Aux√≠lio Moradia e da VPE foram protocolados com sucesso.";
      } else if (temNumeroAux) {
        mensagem += "do Aux√≠lio Moradia foi protocolado com sucesso.";
      } else if (temNumeroVpe) {
        mensagem += "da VPE foi protocolado com sucesso.";
      }
      mensagem += " Aguarde o andamento; novidades ser√£o comunicadas individualmente.";
      const aviso = document.createElement('div');
      aviso.className = 'card';
      aviso.innerHTML = `<p>${mensagem}</p>`;
      container.appendChild(aviso);
    }

    if (statusAux === 'EM FILA' || statusVpe === 'EM FILA') {
      const aviso = document.createElement('div');
      aviso.className = 'card';
      aviso.innerHTML = `<p><strong>Status:</strong> EM FILA</p><p>Sua documenta√ß√£o est√° completa e aguarda protocola√ß√£o. N√£o h√° prazo definido nem necessidade de contato no momento. Acompanhe o andamento por este canal.</p>`;
      container.appendChild(aviso);
    }

    if (recebeVpe.includes('2¬™ LISTA DE IMPLANTA√á√ÉO')) {
      const aviso = document.createElement('div');
      aviso.className = 'card';
      aviso.innerHTML = `<p>Seu nome j√° foi inclu√≠do para implanta√ß√£o. Aguarde novas informa√ß√µes.</p>`;
      container.appendChild(aviso);
    }
  }

  window.addEventListener("DOMContentLoaded", () => {
    document.getElementById("consultBtn").addEventListener("click", async () => {
      const cpfInput = document.getElementById("cpfInput").value;
      const cpfFormatado = formatarCPF(cpfInput);
      if (cpfFormatado.length !== 11) {
        alert("Digite um CPF v√°lido com 11 d√≠gitos.");
        return;
      }
      const docRef = doc(db, "Dados", cpfFormatado);
      const docSnap = await getDoc(docRef);
      if (docSnap.exists()) {
        mostrarDados(docSnap.data());
      } else {
        mostrarDados(null);
      }
    });
  });
</script>

<section style="padding: 50px 20px; background-color: #003366; color: white; text-align: center;">
<h2>Associe-se √† APIPMCBDF</h2>
<p style="max-width: 700px; margin: 20px auto;">Junte-se a centenas de associados que t√™m seus direitos defendidos com firmeza e comprometimento. Seja representado, tenha acesso a benef√≠cios exclusivos e fa√ßa parte da nossa hist√≥ria!</p>
<a href="seja-socio.html" style="display: inline-block; margin-top: 20px; padding: 12px 24px; background-color: #f5b200; color: black; text-decoration: none; border-radius: 5px; font-weight: bold;">Quero me associar</a>
</section>
<section style="padding: 40px 20px; text-align: center; background-color: #fff;
">
<h2>Quem Somos</h2>
<p style="max-width: 800px; margin: auto;">A APIPMCBDF representa e apoia os pensionistas e inativos da Pol√≠cia Militar e Corpo de Bombeiros do Antigo e Atual Distrito Federal. Lutamos por direitos, assist√™ncia e valoriza√ß√£o dos nossos associados.</p>
<a href="sobre.html" style="display: inline-block; margin-top: 20px; padding: 10px 20px; background-color: #003366; color: white; text-decoration: none; border-radius: 5px;">Saiba mais</a>
</section>
<div style="background: #001a33; color: #fff; text-align: center; padding: 10px; font-size: 14px;">Um homem que esquece seu passado est√° condenado a viver sem futuro.</div>
<footer>
  <div class="footer-grid">
    <div><p><strong>Endere√ßo</strong></p><p>Rua Evaristo da Veiga, n¬∫ 55</p><p>10¬∫ andar ‚Äî Centro</p><p>Rio de Janeiro ‚Äî RJ</p><p>CEP: 20031-040</p></div>
    <div><p><strong>Contato</strong></p><p>(21) 2220-5074</p><p>2532-6974 | 2544-2607</p><p>atendimento@apipmcbdf.com.br</p></div>
    <div><p><strong>Atendimento</strong></p><p>Segunda a Sexta</p><p>das 9h √†s 17h</p></div>
    <div><p><strong>Redes Sociais</strong></p><div class="social-icons"><a href="#" title="Instagram"><i class="fab fa-instagram"></i></a><a href="#" title="X"><i class="fab fa-x-twitter"></i></a><a href="#" title="YouTube"><i class="fab fa-youtube"></i></a><a href="https://wa.me/5521984997413" title="WhatsApp"><i class="fab fa-whatsapp"></i></a></div></div>
  </div>
  <div class="footer-bottom"><p>¬© 2025 APIPMCBDF. Todos os direitos reservados.</p></div>
</footer>
<div class="whatsapp-float"><a href="https://wa.me/5521984997413" target="_blank"><img alt="WhatsApp" src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg"/></a></div>
</body>
</html>
