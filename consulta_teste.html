<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Consulta de Documenta√ß√£o</title>
  <!-- Depend√™ncias globais necess√°rias para header/footer -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; background-color: #f9f9f9; }
    /* Estilo da consulta */
    .consulta-container { max-width: 700px; margin: 60px auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    .consulta-container h1 { text-align: center; margin-bottom: 30px; font-weight: 600; font-size: 24px; color: #003366; }
    .consulta-container label { font-weight: 500; display: block; margin-bottom: 8px; }
    .consulta-container input[type="text"] { width: 100%; padding: 10px; font-size: 16px; text-align: center; margin-bottom: 20px; border-radius: 6px; border: 1px solid #ccc; }
    .consulta-container button { width: 100%; padding: 12px; font-size: 16px; font-weight: bold; color: white; background-color: #4a90e2; border: none; border-radius: 6px; cursor: pointer; }
    .consulta-container button:hover { background-color: #357ab8; }
    .card { border: none; border-radius: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); background-color: #ffffff; margin-top: 30px; padding: 20px; }
    .data-section { margin-bottom: 30px; }
    .data-section h3 { font-size: 18px; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 5px; margin-bottom: 15px; }
    .data-section ul { list-style: none; padding: 0; }
    .data-section li { margin-bottom: 8px; }
    /* --- Estilo para abas e status --- */
    .tabs { display: flex; justify-content: center; gap: 12px; margin-top: 20px; flex-wrap: wrap; }
    .tab-button { padding: 10px 20px; font-weight: bold; background-color: #e0e0e0; color: #003366; border: none; border-radius: 20px; cursor: pointer; transition: all 0.2s ease; }
    .tab-button.active { background-color: #003366; color: #fff; }
    .tab-content { display: none; padding: 20px; }
    .tab-content.active { display: block; }
    .tab-content ul { list-style: none; padding-left: 0; margin-top: 10px; }
    .tab-content li { margin-bottom: 8px; font-size: 16px; line-height: 1.5; }
    li[data-status="COMPLETA"]::before { content: "‚úÖ "; color: green; }
    li[data-status="INCOMPLETA"]::before { content: "‚ö†Ô∏è "; color: orange; }
    li[data-status="PROTOCOLADA"]::before { content: "üìë "; color: teal; }
    li[data-status="EM FILA"]::before { content: "‚è≥ "; color: #007bff; }
    li[data-status*="LISTA"]::before { content: "üü¢ "; color: green; }
    li[data-status*="N√ÉO"]::before { content: "‚ùå "; color: red; }

    /* Avisos */
    .warning {
      background-color: #fff8e1;
      border-left: 6px solid #ffb300;
      color: #333;
      padding: 16px 20px;
      margin: 20px 0;
      font-size: 15px;
      line-height: 1.6;
      border-radius: 8px;
    }
/* Estilos m√≠nimos para o header carregado (igual ao diretoria.html) */
    header { background-color: #003366; padding: 20px; color: white; }
    nav { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
    .logo img { height: 50px; }
    nav ul { display: flex; list-style: none; gap: 20px; flex-wrap: wrap; }
    nav ul li { position: relative; }
    nav ul li a {
      color: white; text-decoration: none; font-weight: 600;
      padding: 8px 12px; display: block; transition: background-color 0.3s ease;
    }
    nav ul li a:hover { background-color: #005599; border-radius: 4px; }
    nav ul li ul {
      display: none; position: absolute; background-color: #004080;
      top: 100%; left: 0; min-width: 220px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 10;
    }
    nav ul li:hover ul { display: block; animation: fadeIn 0.3s ease-in-out; }
    nav ul li ul li a { padding: 10px; font-weight: 400; }
    @keyframes fadeIn { from {opacity: 0; transform: translateY(-8px);} to {opacity: 1; transform: translateY(0);} }
    @media (max-width: 768px) {
      nav ul { flex-direction: column; align-items: flex-start; }
    }

  
/* Box "Per√≠odo Individual" */
.periodo-box{
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:12px;
  padding:16px 20px;
  box-shadow:0 1px 4px rgba(0,0,0,.06);
  margin-top:20px
}
.periodo-box h4{font-size:16px;font-weight:700;color:#111827;margin-bottom:2px}
.periodo-box .sub{font-size:12px;color:#6b7280;letter-spacing:.02em}
.periodo-box p.desc{margin:10px 0 12px;font-size:13px;color:#374151}
.periodo-box ul{list-style:none;padding-left:0;margin:0}
.periodo-box li{font-size:14px;margin:6px 0}

/* Grupo box list styles */
.grupo-box .pessoas-title{font-weight:700;margin:8px 0 6px}
.grupo-box .pessoa-item{display:flex;align-items:center;justify-content:space-between;background:#fff;border:1px solid #e5e7eb;border-radius:10px;padding:10px 12px;margin:8px 0;box-shadow:0 1px 2px rgba(0,0,0,.04)}
.grupo-box .pessoa-nome{font-weight:600;cursor:pointer;user-select:none}
.grupo-box .status-badge{font-size:12px;padding:3px 8px;border-radius:999px;border:1px solid #e5e7eb;background:#f9fafb}
.grupo-box .badge-completa{background:#ecfdf5;border-color:#a7f3d0;color:#047857}
.grupo-box .badge-pendente{background:#fff7ed;border-color:#fed7aa;color:#9a3412}
.grupo-box .pend-list{display:none;margin:6px 0 2px 8px;padding-left:18px}
.grupo-box .pessoa-item.open + .pend-list{display:block}
</style>
</head>
<body>
  <!-- Header externo -->
  <div id="header-container"></div>

  <!-- CONTE√öDO PRINCIPAL -->
  <section style="padding: 60px 20px; background-color: #f4f6f9;">
    <div class="consulta-container">
      <h1>CONSULTA DE DOCUMENTA√á√ÉO</h1>
      <label for="cpfInput">Digite seu CPF:</label>
      <input id="cpfInput" placeholder="Digite seu CPF (com ou sem pontua√ß√£o)" type="text"/>
      <button id="consultBtn">CONSULTAR</button>
      <div id="resultContainer"></div>
    </div>
  </section>

  <section style="padding: 50px 20px; background-color: #003366; color: white; text-align: center;">
    <h2>Associe-se √† APIPMCBDF</h2>
    <p style="max-width: 700px; margin: 20px auto;">Junte-se a centenas de associados que t√™m seus direitos defendidos com firmeza e comprometimento. Seja representado, tenha acesso a benef√≠cios exclusivos e fa√ßa parte da nossa hist√≥ria!</p>
    <a href="seja-socio.html" style="display: inline-block; margin-top: 20px; padding: 12px 24px; background-color: #f5b200; color: black; text-decoration: none; border-radius: 5px; font-weight: bold;">Quero me associar</a>
  </section>

  <section style="padding: 40px 20px; text-align: center; background-color: #fff;">
    <h2>Quem Somos</h2>
    <p style="max-width: 800px; margin: auto;">A APIPMCBDF representa e apoia os pensionistas e inativos da Pol√≠cia Militar e Corpo de Bombeiros do Antigo e Atual Distrito Federal. Lutamos por direitos, assist√™ncia e valoriza√ß√£o dos nossos associados.</p>
    <a href="sobre.html" style="display: inline-block; margin-top: 20px; padding: 10px 20px; background-color: #003366; color: white; text-decoration: none; border-radius: 5px;">Saiba mais</a>
  </section>

  <!-- Footer externo -->
  <div id="footer-container"></div>

  <!-- Includes de header e footer -->
  <script>
    
    (function(){
      const isFile = location.protocol === 'file:';
      const h = document.getElementById('header-container');
      const f = document.getElementById('footer-container');
      if (!h || !f) return;
      if (isFile) {
        h.style.display = 'none';
        f.style.display = 'none';
      } else {
        fetch('header.html', { cache: 'no-store' }).then(r=>r.text()).then(t=>h.innerHTML=t).catch(()=>{});
        fetch('footer.html', { cache: 'no-store' }).then(r=>r.text()).then(t=>f.innerHTML=t).catch(()=>{});
      }
    })();
    
    function toggleMenu() {
      var menu = document.getElementById("menu");
      if (menu) menu.classList.toggle("active");
    }
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDoXdgj_fRuYTluJby6QOIiEYBu268lZmQ",
      authDomain: "documentos-apipmcbdf.firebaseapp.com",
      projectId: "documentos-apipmcbdf",
      storageBucket: "documentos-apipmcbdf.appspot.com",
      messagingSenderId: "422508459389",
      appId: "1:422508459389:web:bebd6b53839f77a3cd4814"
    };
    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    function formatarCPF(cpf) {
      return cpf.replace(/\D/g, '').padStart(11, '0');
    }

    function criarLista(campos, data) {
      const ul = document.createElement('ul');
      for (let campo of campos) {
        let valor = data[campo];
        if (!valor || !valor.toString().trim()) continue;

        let status = valor.toString().toUpperCase();

        // Renomeia "Status VPE"/"Status AUX" para "Pend√™ncias" se documenta√ß√£o estiver incompleta
        if ((campo === 'Status VPE' && (data['Documenta√ß√£o VPE'] || '').toUpperCase() === 'INCOMPLETA') ||
            (campo === 'Status AUX' && (data['Documenta√ß√£o AUX'] || '').toUpperCase() === 'INCOMPLETA')) {
          campo = 'Pend√™ncias';
        }

        // Renomeia "Recebe VPE" para "Lista de implanta√ß√£o" se estiver em uma das listas
        if (campo === 'Recebe VPE' && ['SEGUNDA LISTA DE IMPLANTA√á√ÉO VPE','TERCEIRA LISTA DE IMPLANTA√á√ÉO VPE','QUARTA LISTA DE IMPLANTA√á√ÉO VPE'].includes(status)) {
          campo = 'Lista de implanta√ß√£o';
        }

        const li = document.createElement('li');
        li.setAttribute('data-status', status);

        // Formata√ß√£o amig√°vel com quebra de linhas para pend√™ncias
        if (campo === 'Pend√™ncias') {
          const pendencias = valor.split(';').map(p => `<li>üìå ${p.trim()}</li>`).join('');
          li.innerHTML = `<strong>Pend√™ncias:</strong><ul style='margin-top:8px; padding-left: 18px;'>${pendencias}</ul>`;
        } else {
          li.textContent = `${campo}: ${valor}`;
        }
        ul.appendChild(li);
      }
      return ul.childElementCount ? ul : null;
    }

    
// === Box Per√≠odo Individual 2008-2025 (VPE) ===

function criarBoxPeriodoIndividual(data){
  let periodo = (data['PERIODO INDIVIDUAL'] || '').toString().trim();
  periodo = periodo.replace(/[‚Äì‚Äî]/g,'-');
  if (!periodo || periodo === '‚Äî' || periodo === '-') return null;

  const nome = (data['Nome'] || '').toString().trim();
  const recebeVPE = (data['Recebe VPE'] || '‚Äî').toString().trim();

  const statusVPE = (data['Status VPE'] || '').toString().trim();
  const execSCVPE = (data['EXECU√á√ÉO SC VPE'] || '‚Äî').toString().trim();
  const hasStatus = statusVPE && statusVPE !== '‚Äî' && statusVPE !== '-';
  const labelStatus = hasStatus ? 'Status VPE' : 'Execu√ß√£o SC VPE';
  const valorStatus = (hasStatus ? statusVPE : execSCVPE).toString().trim();

  const docVPE = (data['Documenta√ß√£o VPE'] || '‚Äî').toString().trim();

  const items = [];
  const pushItem = (icon, label, value) => {
    if (!value) return;
    const v = value.toString().trim();
    if (v === '‚Äî' || v === '-') return;
    items.push(`<li>${icon} <strong>${label}:</strong> ${v}</li>`);
  };
  pushItem('üìí', 'Recebe VPE', recebeVPE);
  pushItem('üìÑ', labelStatus, valorStatus);
  pushItem('üìÅ', 'Documenta√ß√£o VPE', docVPE);
  if (items.length === 0) return null;

  const box = document.createElement('div');
  box.className = 'periodo-box';
  box.innerHTML = `
    <h4>Per√≠odo Individual - ${periodo}</h4>
    <div class="sub">${nome ? nome.toUpperCase() : ''}</div>
    <p class="desc">Esse per√≠odo √© exclusivo da pensionista atual e apenas ela receber√° a parte referente a sua pens√£o</p>
    <ul>${items.join('\n')}</ul>`;
  return box;
}



// === Box Per√≠odo Individual 2008-2025 (AUX) ===

function criarBoxPeriodoIndividualAux(data){
  let periodo = (data['PERIODO INDIVIDUAL'] || '').toString().trim();
  periodo = periodo.replace(/[‚Äì‚Äî]/g,'-');
  if (!periodo || periodo === '‚Äî' || periodo === '-') return null;

  const nome = (data['Nome'] || '').toString().trim();
  const recebeAUX = (data['Recebe AUX'] || '‚Äî').toString().trim();
  const execAUX   = (data['EXECU√á√ÉO SC AUX'] || '‚Äî').toString().trim();
  const docAUX    = (data['Documenta√ß√£o AUX'] || '‚Äî').toString().trim();
  const statusAUX = (data['Status AUX'] || '‚Äî').toString().trim();

  const items = [];
  const pushItem = (icon, label, value) => {
    if (!value) return;
    const v = value.toString().trim();
    if (v === '‚Äî' || v === '-') return;
    items.push(`<li>${icon} <strong>${label}:</strong> ${v}</li>`);
  };
  pushItem('üìí', 'Recebe AUX', recebeAUX);
  pushItem('üìÑ', 'Execu√ß√£o SC AUX', execAUX);
  pushItem('üìÅ', 'Documenta√ß√£o AUX', docAUX);
  pushItem('üóÇÔ∏è', 'Status AUX', statusAUX);
  if (items.length === 0) return null;

  const box = document.createElement('div');
  box.className = 'periodo-box';
  box.innerHTML = `
    <h4>Per√≠odo Individual - ${periodo}</h4>
    <div class="sub">${nome ? nome.toUpperCase() : ''}</div>
    <p class="desc">Esse per√≠odo √© exclusivo da pensionista atual e apenas ela receber√° a parte referente a sua pens√£o</p>
    <ul>${items.join('\n')}</ul>`;
  return box;
}



// === Box Per√≠odo do Grupo 2008-2025 (IND) ===

function criarBoxPeriodoGrupo(data){
  const perGrupo = (data['PERIODO DO GRUPO'] || '').toString().trim();
  let perInd   = (data['PERIODO INDIVIDUAL'] || '').toString().trim().replace(/[‚Äì‚Äî]/g,'-');
  if (!perGrupo || perGrupo === '‚Äî' || perGrupo === '-') return null;
  if (!perInd   || perInd   === '‚Äî' || perInd   === '-') return null;

  const grupo = (data['Grupo'] || '').toString().trim();
  const statusGrupoRaw = (data['Status VPE Grupo'] || '').toString().trim();
  if (!statusGrupoRaw) return null;

  const titulo = /(\(IND\))/i.test(perGrupo) ? 'Per√≠odo do Grupo' : 'Per√≠odo dos Herdeiros';

  const box = document.createElement('div');
  box.className = 'periodo-box grupo-box';
  box.innerHTML = `
    <h4>${titulo} - ${perGrupo}</h4>
    <div class="sub">${grupo ? grupo.toUpperCase() : ''}</div>
    <p class="desc">Pensionistas de mesmo instituidor ser√£o protocoladas juntas pois o c√°lculo √© da mesma pens√£o</p>
    <div class="pessoas-title">üìÅ <strong>Documenta√ß√£o do Grupo:</strong></div>
  `;

  const entries = statusGrupoRaw.split('|').map(s => s.trim()).filter(Boolean);
  entries.forEach((entry) => {
    const parts = entry.split(':');
    const nome = (parts[0] || '').trim();
    const detalhes = (parts[1] || '').trim();

    let completa = false;
    let pendencias = [];
    if (!detalhes || /COMPLETA/i.test(detalhes)) {
      completa = true;
    } else {
      pendencias = detalhes.split(',').map(p => p.trim()).filter(p => p && p !== '‚Äî' && p !== '-');
    }

    const item = document.createElement('div');
    item.className = 'pessoa-item';

    const nomeEl = document.createElement('span');
    nomeEl.className = 'pessoa-nome';
    nomeEl.textContent = nome || '‚Äî';

    const badge = document.createElement('span');
    badge.className = 'status-badge ' + (completa ? 'badge-completa' : 'badge-pendente');
    badge.textContent = completa ? 'Completa' : (pendencias.length + ' pend√™ncia(s)');

    item.appendChild(nomeEl);
    item.appendChild(badge);
    box.appendChild(item);

    if (!completa && pendencias.length) {
      const ul = document.createElement('ul');
      ul.className = 'pend-list';
      pendencias.forEach(p => { const li = document.createElement('li'); li.textContent = p; ul.appendChild(li); });
      box.appendChild(ul);
      item.addEventListener('click', () => item.classList.toggle('open'));
    }
  });

  return box;
}


function mostrarDados(data) {
      const container = document.getElementById('resultContainer');
      container.innerHTML = '';

      if (!data || Object.keys(data).length === 0) {
        container.innerHTML = `<div class="card"><p style="padding:20px; text-align:center; font-weight:bold;">‚ùå Nenhum dado encontrado para este CPF.</p></div>`;
        return;
      }

      const card = document.createElement('div');
      card.className = 'card';

      const tabData = [
        { title: 'üßæ Informa√ß√µes Gerais', campos: ['Nome','CPF','Mensalidade','Benefici√°rio'] },
        { title: 'üè† Aux√≠lio Moradia',    campos: ['Documenta√ß√£o AUX','Status AUX'] },
        { title: 'üíº VPE',                campos: ['Documenta√ß√£o VPE','Status VPE','Recebe VPE'] }
      ];

      const docVPE = data['Documenta√ß√£o VPE']?.toString().toUpperCase() || '';
      const docAUX = data['Documenta√ß√£o AUX']?.toString().toUpperCase() || '';
      const statusAUX = data['Status AUX']?.toString().toUpperCase() || '';
      const statusVPE = data['Status VPE']?.toString().toUpperCase() || '';
      const recebeVPE = data['Recebe VPE']?.toString().toUpperCase() || '';
      const warnings = [];

      if (docVPE === 'PROTOCOLADA' || docAUX === 'PROTOCOLADA') {
        let processos = '';
        if (docVPE === 'PROTOCOLADA' && docAUX === 'PROTOCOLADA') processos = 'do Aux√≠lio Moradia e da VPE';
        else if (docAUX === 'PROTOCOLADA') processos = 'do Aux√≠lio Moradia';
        else processos = 'da VPE';
        warnings.push(`Seu(s) processo(s) ${processos} foram protocolados com sucesso. Aguarde o andamento; novidades ser√£o comunicadas individualmente.`);
      }

      if (statusAUX === 'AGUARDANDO IMPLANTA√á√ÉO') {
        warnings.push('AGUARDANDO IMPLANTA√á√ÉO DO AUX√çLIO MORADIA');
      }

      if (['SEGUNDA LISTA DE IMPLANTA√á√ÉO VPE','TERCEIRA LISTA DE IMPLANTA√á√ÉO VPE','QUARTA LISTA DE IMPLANTA√á√ÉO VPE'].includes(recebeVPE)) {
        warnings.push('Seu nome j√° foi inclu√≠do para implanta√ß√£o. Aguarde novas informa√ß√µes.');
      }

      if (docVPE === 'INCOMPLETA' || docAUX === 'INCOMPLETA' || docVPE === 'NCOMPLETA' || docAUX === 'NCOMPLETA') {
        warnings.push(`üì¢ Aten√ß√£o! Envio de Documentos Pendentes<br>Para dar continuidade ao seu processo, encaminhe os documentos pendentes conforme as instru√ß√µes abaixo:<br><br>üìß Documentos que podem ser enviados por e-mail:<br><br>‚úÖ Contracheque  <br>‚úÖ Ficha Financeira (preferencialmente por e-mail)  <br>‚úÖ Comprovante de resid√™ncia  <br>‚úÖ Documento de identidade (RG ou CNH)<br><br>Enviar para: documentos@apipmcbdf.com.br  <br>Assunto: Documenta√ß√£o Pendente<br><br>‚ö†Ô∏è Importante:<br>- N√ÉO ACEITAMOS PRINTS DE TELA<br>- CUIDADO COM PDF PROTEGIDO POR SENHA<br>- Somente arquivos PDF, leg√≠veis e em boa qualidade.<br><br>üìÆ Entrega f√≠sica ou pelos Correios:<br>üîπ Contrato<br>üîπ Procura√ß√£o<br>üîπ Declara√ß√£o de Inexist√™ncia de A√ß√£o<br><br>Rua Evaristo da Veiga, 55, 10¬∫ andar ‚Äì CEP: 20031-040  <br>Presencial: 09h √†s 13h<br><br>üìû (21) 2532-6974 / 2220-6154 / 2544-2607  <br>üí¨ WhatsApp: (21) 98499-7413  <br>üìß atendimento@apipmcbdf.com.br`);

        let linksHtml = '<div>üìå Baixe aqui os documentos padr√£o pendentes:<ul>';

        const statusAuxStr = statusAUX.toUpperCase();
        const statusVpeStr = statusVPE.toUpperCase();

        if (docAUX === 'INCOMPLETA' || docAUX === 'NCOMPLETA') {
          if (statusAuxStr.includes('PROCURA√á√ÉO')) {
            linksHtml += '<li><a href="https://drive.google.com/file/d/1rsujXVdCMEiIO0di30OoUAuKwO4JEnvK/view?usp=drive_link" target="_blank">PROCURA√á√ÉO AUX</a></li>';
          }
          if (statusAuxStr.includes('CONTRATO')) {
            linksHtml += '<li><a href="https://drive.google.com/file/d/1rryE7Kworr16Qhb6-i1TGXZXQyPImiI-/view?usp=drive_link" target="_blank">CONTRATO AUX</a></li>';
          }
          if (statusAuxStr.includes('DECLARA√á√ÉO')) {
            linksHtml += '<li><a href="https://drive.google.com/file/d/1rt4tOVPEQuU7Nj1mHEIMlx25L2ZqaXjp/view?usp=drive_link" target="_blank">DECLARA√á√ÉO DE INEXIST√äNCIA DE A√á√ÉO AUX</a></li>';
          }
        }

        if (docVPE === 'INCOMPLETA' || docVPE === 'NCOMPLETA') {
          if (statusVpeStr.includes('PROCURA√á√ÉO')) {
            linksHtml += '<li><a href="https://drive.google.com/file/d/1-1IL4GtaIA0uE_OeSJuvqNtuAGiWF-4D/view?usp=drive_link" target="_blank">PROCURA√á√ÉO VPE</a></li>';
          }
          if (statusVpeStr.includes('CONTRATO')) {
            linksHtml += '<li><a href="https://drive.google.com/file/d/1-0PkD2Y9azc6TxnDzl1SmPHfXlKFyj7g/view?usp=drive_link" target="_blank">CONTRATO VPE</a></li>';
          }
          if (statusVpeStr.includes('DECLARA√á√ÉO')) {
            linksHtml += '<li><a href="https://drive.google.com/file/d/1-0Ee-gDuO4jHjOGBLFQHNR7pVcn8eKSf/view?usp=drive_link" target="_blank">DECLARA√á√ÉO DE INEXIST√äNCIA DE A√á√ÉO VPE</a></li>';
          }
        }

        linksHtml += '</ul></div>';
        warnings.push(linksHtml);
      }

      if (statusAUX.includes('LITISPENDENCIA') || statusVPE.includes('LITISPENDENCIA')) {
        let text = 'FOI IDENTIFICADA LITISPEND√äNCIA PARA ';
        if (statusAUX.includes('LITISPENDENCIA') && statusVPE.includes('LITISPENDENCIA')) text += 'AUX e VPE. ';
        else if (statusAUX.includes('LITISPENDENCIA')) text += 'AUX. ';
        else text += 'VPE. ';
        text += 'SUA DOCUMENTA√á√ÉO, PARA SOLICITAR OS VALORES RETROATIVOS, FOI ARQUIVADA.';
        warnings.push(text);
      }

      if (statusAUX === 'PARA C√ÅLCULO' || statusVPE === 'PARA C√ÅLCULO') {
        warnings.push('Sua documenta√ß√£o est√° completa e foi enviada ao contador para c√°lculo dos atrasados. N√£o h√° prazo definido nem necessidade de contato no momento. Acompanhe o andamento por este canal.');
      }

      

tabData.forEach((tab) => {
  let campos = tab.campos.slice();

  let auxBoxEl = null, vpeBoxEl = null, groupBoxEl = null;

  if (tab.title === 'üè† Aux√≠lio Moradia') {
    auxBoxEl = criarBoxPeriodoIndividualAux(data);
    if (auxBoxEl) {
      campos = campos.filter(c => c !== 'Documenta√ß√£o AUX' && c !== 'Status AUX' && c !== 'Recebe AUX');
    }
  }
  if (tab.title === 'üíº VPE') {
    vpeBoxEl = criarBoxPeriodoIndividual(data);
    groupBoxEl = criarBoxPeriodoGrupo(data);
    if (vpeBoxEl || groupBoxEl) {
      campos = campos.filter(c => c !== 'Documenta√ß√£o VPE' && c !== 'Recebe VPE' && c !== 'Status VPE' && c !== 'Status VPE Grupo');
    }
  }

  let temConteudo = false;
  for (const campo of campos) {
    const valor = data[campo];
    if (valor === undefined || valor === null) continue;
    const v = valor.toString().trim();
    if (v !== '' && v !== '‚Äî' && v !== '-') { temConteudo = true; break; }
  }
  if (!temConteudo && !auxBoxEl && !vpeBoxEl && !groupBoxEl) return;

  const section = document.createElement('div');
  section.className = 'data-section';

  const title = document.createElement('h3');
  title.textContent = tab.title;
  section.appendChild(title);

  if (vpeBoxEl) section.appendChild(vpeBoxEl);
  if (groupBoxEl) section.appendChild(groupBoxEl);
  if (auxBoxEl) section.appendChild(auxBoxEl);

  campos.forEach((campo) => {
    const valor = data[campo];
    if (valor === undefined || valor === null) return;
    const v = valor.toString().trim();
    if (v === '' || v === '‚Äî' || v === '-') return;

    const row = document.createElement('div');
    row.className = 'data-row';

    const label = document.createElement('span');
    label.className = 'label';
    label.textContent = `${campo}: `;

    const value = document.createElement('span');
    value.className = 'value';
    value.textContent = v;

    row.appendChild(label);
    row.appendChild(value);
    section.appendChild(row);
  });

  card.appendChild(section);
});
if (warnings.length > 0) {
        warnings.forEach(msg => {
          const avisoDiv = document.createElement('div');
          avisoDiv.className = 'warning';
          avisoDiv.innerHTML = msg;
          card.appendChild(avisoDiv);
        });
      }

      container.appendChild(card);
    }

    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('consultBtn').onclick = async () => {
        const raw = document.getElementById('cpfInput').value;
        const cpf = formatarCPF(raw);
        if (cpf.length !== 11) { alert('CPF inv√°lido'); return; }
        const snap = await getDoc(doc(db,'Dados',cpf));
        mostrarDados(snap.exists() ? snap.data() : {});
      };
    });
  </script>
  <noscript>
    <iframe src="header.html" title="Cabe√ßalho" style="width:100%; border:0; height:160px;"></iframe>
    <iframe src="footer.html" title="Rodap√©" style="width:100%; border:0; height:320px;"></iframe>
  </noscript>

</body>
</html>
